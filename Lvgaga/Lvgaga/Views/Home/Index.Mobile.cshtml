@model IEnumerable<LvModel.View.Tumblr.TumblrModel>
@{
    ViewBag.Title = "首页";
}

<div>
    @foreach (var tumblr in Model)
    {
        <div id="@tumblr.Id" class="container-tumblr" pk="@tumblr.PartitionKey" rk="@tumblr.RowKey">
            <img class="img-tumblr lazy" data-original="@tumblr.MediaUri" alt="" />
            <div class="content">
                <p class="text-tumblr">@tumblr.Text</p>
                <p class="date-tumblr">@tumblr.CreateTime</p>
                <button type="button" class="btn btn-default btn-favorite"><span class="glyphicon glyphicon-heart" aria-hidden="true"></span></button>
                <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-share-alt" aria-hidden="true"></span></button>
                <a class="btn btn-default pull-right" href="@tumblr.Uri"><span class="glyphicon glyphicon-th-list" aria-hidden="true"></span></a>
            </div>
            <hr class="hr-tumblr" />
        </div>
    }
    <div class="container-block">
        <button type="button" class="btn btn-default btn-block">加载更多</button>
    </div>
</div>

@section scripts{
    @Scripts.Render("~/bundles/jquerylazy")
    @Scripts.Render("~/bundles/business")
    <script>
        (function () {
            $(function () {
                $("img.lazy").lazyload({
                    effect: "fadeIn"
                });

                $(".btn-favorite").on("touchend", function (event) {
                    //$(event.currentTarget).toggleClass("btn-selected");
                    var container = $($(event.currentTarget).parents(".container-tumblr")[0]);
                    favorite(container.attr("pk"), container.attr("rk"), $(event.currentTarget));
                });
            });
        })();
    </script>
}
